{
    "version": "https://jsonfeed.org/version/1",
    "title": "初始设定 • All posts by \"javascript\" tag",
    "description": "",
    "home_page_url": "https://Riddddder.github.io",
    "items": [
        {
            "id": "https://riddddder.github.io/2024/11/08/JS%E6%A0%87%E7%AD%BE%E5%8C%96%E6%A8%A1%E6%9D%BF/",
            "url": "https://riddddder.github.io/2024/11/08/JS%E6%A0%87%E7%AD%BE%E5%8C%96%E6%A8%A1%E6%9D%BF/",
            "title": "JS标签化模板",
            "date_published": "2024-11-08T13:13:42.000Z",
            "content_html": "<h2 id=\"标签化模板\"><a class=\"markdownIt-Anchor\" href=\"#标签化模板\">#</a> 标签化模板</h2>\n<h3 id=\"1-标签化模板是什么\"><a class=\"markdownIt-Anchor\" href=\"#1-标签化模板是什么\">#</a> 1. 标签化模板是什么</h3>\n<p>标签模板是模板字符串使用的一种高级形式，用代码示意就是 ——</p>\n<p>这是我们常见的模板字符串：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> author = <span class=\"string\">&#x27;zhangxinxu&#x27;</span>;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(<span class=\"string\">`write by <span class=\"subst\">$&#123;author&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>\n<p>这个就是标签模板，是模板字符串使用的高级形式：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> author = <span class=\"string\">&#x27;zhangxinxu&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">function</span> <span class=\"title function_\">tag</span> (arr, exp) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;arr[<span class=\"number\">0</span>]&#125;</span><span class=\"subst\">$&#123;exp&#125;</span>`</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(tag<span class=\"string\">`write by <span class=\"subst\">$&#123;author&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>\n<p>两段内容返回的结果是一样的。<br>\n仔细看 tag <code>write by $&#123;author&#125;</code>  这段代码，其中 tag 就是标签模板中的 “标签”， <code>write by $&#123;author&#125;</code>  就是标签模板中的 “模板”。</p>\n<p>因此，“标签” 实际上并不是指的标签，而是类似于标签性质的函数，“模板” 则是这个函数的参数。</p>\n<h3 id=\"2-标签化模板的语法\"><a class=\"markdownIt-Anchor\" href=\"#2-标签化模板的语法\">#</a> 2. 标签化模板的语法</h3>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> tag = <span class=\"keyword\">function</span> (<span class=\"params\">strings, ...values</span>) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// strings是一个数组，包含了模板字符串中的每一部分</span></span><br><span class=\"line\">  <span class=\"comment\">// values是一个数组，包含了模板字符串中的每一部分对应的值</span></span><br><span class=\"line\">  <span class=\"comment\">// 可以在这里对模板字符串进行处理，然后返回一个字符串</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> strings[<span class=\"number\">0</span>] + values[<span class=\"number\">0</span>] + strings[<span class=\"number\">1</span>] + values[<span class=\"number\">1</span>] + strings[<span class=\"number\">2</span>];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> name = <span class=\"string\">&quot;Alice&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> age = <span class=\"number\">20</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = tag<span class=\"string\">`My name is <span class=\"subst\">$&#123;name&#125;</span>, I am <span class=\"subst\">$&#123;age&#125;</span> years old.`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(result); <span class=\"comment\">// My name is Alice, I am 20 years old.</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"3-标签化模板的应用\"><a class=\"markdownIt-Anchor\" href=\"#3-标签化模板的应用\">#</a> 3. 标签化模板的应用</h3>\n<p>利用标签化模板，可以实现很多有趣的功能，比如：</p>\n<ul>\n<li>这是一段 <code>命令式编程</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a.<span class=\"property\">style</span>.<span class=\"property\">color</span> = <span class=\"title function_\">getColor</span>();</span><br><span class=\"line\">a.<span class=\"property\">style</span>.<span class=\"property\">backgroundColor</span> = <span class=\"title function_\">getBackgroundColor</span>();</span><br><span class=\"line\">a.<span class=\"property\">style</span>.<span class=\"property\">fontSize</span> = <span class=\"title function_\">getFontSize</span>();</span><br><span class=\"line\">a.<span class=\"property\">style</span>.<span class=\"property\">height</span> = height + <span class=\"string\">&#x27;px&#x27;</span>;</span><br><span class=\"line\">a.<span class=\"property\">style</span>.<span class=\"property\">width</span> = width + <span class=\"string\">&#x27;px&#x27;</span>;</span><br><span class=\"line\">a.<span class=\"property\">href</span> = href;</span><br><span class=\"line\">a.<span class=\"property\">title</span> = title;</span><br><span class=\"line\">a.<span class=\"property\">target</span> = target;</span><br><span class=\"line\">a.<span class=\"property\">textContent</span> = textContent;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>我们可以通过标签化模板特性将其转换成 <code>声明式编程</code></li>\n</ul>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a.<span class=\"property\">styles</span><span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    color: <span class=\"subst\">$&#123;getColor()&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">    background-color: <span class=\"subst\">$&#123;getBackgroundColor()&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">    font-size: <span class=\"subst\">$&#123;getFontSize()&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">    height: <span class=\"subst\">$&#123;height&#125;</span>px;</span></span><br><span class=\"line\"><span class=\"string\">    width: <span class=\"subst\">$&#123;width&#125;</span>px;</span></span><br><span class=\"line\"><span class=\"string\">`</span>.<span class=\"property\">props</span><span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    href: <span class=\"subst\">$&#123;href&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">    title: <span class=\"subst\">$&#123;title&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">    target: <span class=\"subst\">$&#123;target&#125;</span>;</span></span><br><span class=\"line\"><span class=\"string\">`</span>.<span class=\"title function_\">content</span>($&#123;textContent&#125;);</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">HTMLElement</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">styles</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> styles = <span class=\"title function_\">generateString</span>(<span class=\"variable language_\">arguments</span>)</span><br><span class=\"line\">    <span class=\"keyword\">let</span> curStyle = <span class=\"variable language_\">this</span>.<span class=\"title function_\">getAttribute</span>(<span class=\"string\">&quot;style&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(curStyle) &#123;</span><br><span class=\"line\">        curStyle += styles;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        curStyle = styles;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">style</span> = curStyle;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">HTMLElement</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">props</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> propString = <span class=\"title function_\">generateString</span>(<span class=\"variable language_\">arguments</span>)</span><br><span class=\"line\">    propString</span><br><span class=\"line\">        .<span class=\"title function_\">split</span>(<span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">        .<span class=\"title function_\">map</span>(<span class=\"function\"><span class=\"params\">it</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> prats = it.<span class=\"title function_\">trim</span>().<span class=\"title function_\">split</span>(<span class=\"string\">&quot;:&quot;</span>);</span><br><span class=\"line\">            <span class=\"keyword\">const</span> key = prats[<span class=\"number\">0</span>].<span class=\"title function_\">trim</span>();</span><br><span class=\"line\">            <span class=\"keyword\">const</span> value = parts.<span class=\"title function_\">slice</span>(<span class=\"number\">1</span>).<span class=\"title function_\">join</span>(<span class=\"string\">&quot;:&quot;</span>).<span class=\"title function_\">trim</span>();</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(value.<span class=\"title function_\">indexOf</span>(<span class=\"string\">&quot;;&quot;</span>)===value.<span class=\"property\">length</span> - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                value = value.<span class=\"title function_\">substring</span>(<span class=\"number\">0</span>, value.<span class=\"property\">length</span> - <span class=\"number\">1</span>)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> [key, value];</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .<span class=\"title function_\">forEach</span>([k, v] =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(!k) &#123; <span class=\"keyword\">return</span>; &#125;</span><br><span class=\"line\">            <span class=\"variable language_\">this</span>[k] = v;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">HTMLElement</span>.<span class=\"property\"><span class=\"keyword\">prototype</span></span>.<span class=\"property\">content</span> = <span class=\"keyword\">function</span> (<span class=\"params\"></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> content = <span class=\"title function_\">generateString</span>(<span class=\"variable language_\">arguments</span>);</span><br><span class=\"line\">    <span class=\"variable language_\">this</span>.<span class=\"property\">textContent</span> = content;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"variable language_\">this</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "前端",
                "JavaScript",
                "ES6"
            ]
        }
    ]
}